;/*FB_PKG_DELIM*/

__d("LSFetchOccamThreadIfNeeded",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.count(c.db.table(9).fetch([[[a[0]]]])).then(function(a){return d[0]=a})},function(e){return c.i64.eq(d[0],c.i64.cast([0,0]))?(d[1]=new c.Map(),d[1].set("thread_fbid",a[0]),d[1].set("force_upsert",!1),d[1].set("use_open_messenger_transport",!1),d[1].set("sync_group",c.i64.cast([0,95])),d[1].set("metadata_only",!1),d[1].set("preview_only",!1),d[2]=d[1].get("thread_fbid"),d[3]=c.toJSON(d[1]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[2]),c.i64.cast([0,209]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.resolve(function(a){c.logger(a).info(a)}("Thread already exists."))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxFetchOccamThreadIfNeededStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);